import{a as y}from"./chunk-SXUBGAWM.js";import{$ as w,B as N,C as u,G as x,J as s,K as S,N as _,O as P,P as b,Q as p,R as a,S as d,T as E,U as F,V as $,W as C,X as f,Y as j,Z as D,_ as l,aa as L,da as R,ia as U,k as I,n as O,na as z,oa as B,q as k,r as M,sa as H,va as K,xa as V,y as T,z as r}from"./chunk-E7NG4QQB.js";function q(n,t){if(n&1&&(p(0,"span"),l(1),a()),n&2){let e=t.$implicit;r(),w(e.title||e.name)}}var v=class n{person;getProfileImage(){return this.person.profile_path?`https://image.tmdb.org/t/p/w300${this.person.profile_path}`:"user-profile-img.svg"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-person-card"]],inputs:{person:"person"},decls:8,vars:3,consts:[[1,"person__card"],[3,"src","alt"],[1,"person__info"],[1,"known-for"]],template:function(e,o){e&1&&(p(0,"div",0),d(1,"img",1),p(2,"div",2)(3,"h3"),l(4),a(),p(5,"div",3),P(6,q,2,1,"span",null,_),a()()()),e&2&&(r(),j("alt",o.person.name),s("src",o.getProfileImage(),T),r(3),w(o.person.name),r(2),b(o.person.known_for))},styles:[".person__card[_ngcontent-%COMP%]{width:280px;display:flex;flex-direction:column;background-color:#fff;border-radius:8px;box-shadow:0 4px 12px #00000014;overflow:hidden;transition:background .2s ease-in-out;height:100%;min-height:400px}.person__card[_ngcontent-%COMP%]:hover{background:#fcf0f0}.person__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:8px}.person__info[_ngcontent-%COMP%]{padding:8px 12px}.person__info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:.8rem}.person__info[_ngcontent-%COMP%]   .known-for[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;display:-webkit-box;line-clamp:3;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.person__info[_ngcontent-%COMP%]   .known-for[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem}"]})};var h=class n{constructor(t){this.http=t}baseUrl=y.BASE_URL;apiKey=y.API_KEY;getPeople(t=1){return this.http.get(`${this.baseUrl}/person/popular?api_key=${this.apiKey}&page=${t}`)}static \u0275fac=function(e){return new(e||n)(O(H))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var J=n=>["/person",n];function Q(n,t){if(n&1&&d(0,"app-person-card",2),n&2){let e=t.$implicit;s("person",e)("routerLink",R(2,J,e.id))}}function X(n,t){if(n&1){let e=$();p(0,"button",7),C("click",function(){k(e);let c=f().$implicit,m=f();return M(m.goToPage(c))}),l(1),a()}if(n&2){let e=f().$implicit,o=f();S("active",e===o.currentPage),r(),L(" ",e," ")}}function Z(n,t){n&1&&(p(0,"span",8),l(1,"..."),a())}function ee(n,t){if(n&1&&(E(0),x(1,X,2,3,"button",6)(2,Z,2,0,"ng-template",null,0,U),F()),n&2){let e=t.$implicit,o=D(3);r(),s("ngIf",e!=="...")("ngIfElse",o)}}var W=class n{constructor(t){this.peopleService=t}people=[];currentPage=1;totalPages=0;ngOnInit(){this.loadPeople()}loadPeople(){this.peopleService.getPeople(this.currentPage).subscribe(t=>{this.people=t.results,this.totalPages=t.total_pages})}getMovieTitles(t){return t.known_for.map(e=>e.title||e.original_title||e.original_name).join(", ")}nextPage(){this.currentPage++,this.loadPeople(),window.scrollTo({top:0,behavior:"smooth"})}prevPage(){this.currentPage>1&&(this.currentPage--,this.loadPeople(),window.scrollTo({top:0,behavior:"smooth"}))}goToPage(t){let e=Number(t);!isNaN(e)&&e!==this.currentPage&&(this.currentPage=e,this.loadPeople(),window.scrollTo({top:0,behavior:"smooth"}))}getPageNumbers(){let t=this.totalPages,e=this.currentPage,o=2,c=[],m=[],g=0;for(let i=1;i<=t;i++)(i===1||i===t||i>=e-o&&i<=e+o)&&c.push(i);for(let i of c)g&&(Number(i)-g===2?m.push(g+1):Number(i)-g!==1&&m.push("...")),m.push(i),g=Number(i);return m}static \u0275fac=function(e){return new(e||n)(N(h))};static \u0275cmp=u({type:n,selectors:[["app-people"]],decls:11,vars:3,consts:[["dots",""],[1,"people__list"],[3,"person","routerLink"],[1,"pagination"],[3,"click","disabled"],[4,"ngFor","ngForOf"],[3,"active","click",4,"ngIf","ngIfElse"],[3,"click"],[1,"dots"]],template:function(e,o){e&1&&(p(0,"section")(1,"div",1),P(2,Q,1,4,"app-person-card",2,_),a(),p(4,"div",3)(5,"button",4),C("click",function(){return o.prevPage()}),l(6," \u2190 Previous "),a(),x(7,ee,4,2,"ng-container",5),p(8,"button",4),C("click",function(){return o.nextPage()}),l(9," Next \u2192 "),a()()(),d(10,"router-outlet")),e&2&&(r(2),b(o.people),r(3),s("disabled",o.currentPage===1),r(2),s("ngForOf",o.getPageNumbers()),r(),s("disabled",o.currentPage===o.totalPages))},dependencies:[v,z,B,V,K],styles:[".people__list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;padding:20px}.pagination[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:6px;margin-top:30px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;background:#eee;cursor:pointer;transition:background .2s}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#333;color:#fff;font-weight:700}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled):not(.active){background:#ccc}.pagination[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{padding:6px 10px;color:#888}"]})};export{W as PeopleComponent};
