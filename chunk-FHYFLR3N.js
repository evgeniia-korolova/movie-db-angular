import{a as g,b as F}from"./chunk-UIORZEUM.js";import{a as _}from"./chunk-IH7GETN6.js";import{B as r,C as l,G as v,J as m,K as d,M as h,Q as n,R as a,W as p,_ as f,ka as u,z as s}from"./chunk-HGSF4TYC.js";function S(o,t){o&1&&(n(0,"div",2),f(1,"Please log in to add to Favorites"),a())}var C=class o{constructor(t,i,e){this.favoritesService=t;this.authService=i;this.cdr=e}id;media_type;title;poster_path;item;isFilled=!1;showTooltip=!1;isFavorite=!1;sub;ngOnInit(){this.checkFavorite(),this.sub=this.favoritesService.favoritesChanged$.subscribe(()=>{this.checkFavorite(),this.cdr.markForCheck()})}ngOnDestroy(){this.sub?.unsubscribe()}checkFavorite(){this.isFavorite=this.favoritesService.isFavorite(this.id,this.media_type),this.isFilled=this.isFavorite,this.cdr.detectChanges()}toggleFavorite(){if(!this.authService.isAuthenticated())return;let t={id:this.id,media_type:this.media_type,title:this.title,poster_path:this.poster_path};this.favoritesService.toggleFavorite(t),this.checkFavorite()}static \u0275fac=function(i){return new(i||o)(r(F),r(_),r(u))};static \u0275cmp=l({type:o,selectors:[["app-favorite-toggle"]],inputs:{id:"id",media_type:"media_type",title:"title",poster_path:"poster_path",item:"item"},decls:3,vars:4,consts:[[1,"favorite__wrapper",3,"mouseenter","mouseleave"],[3,"click","filled"],[1,"custom-tooltip"]],template:function(i,e){i&1&&(n(0,"div",0),p("mouseenter",function(){return e.showTooltip=!e.authService.isAuthenticated()})("mouseleave",function(){return e.showTooltip=!1}),n(1,"app-favorite-icon",1),p("click",function(){return e.toggleFavorite()}),a(),v(2,S,2,0,"div",2),a()),i&2&&(s(),d("inactive-icon",!e.authService.isAuthenticated()),m("filled",e.isFilled),s(),h(!e.authService.isAuthenticated()&&e.showTooltip?2:-1))},dependencies:[g],styles:[".favorite__wrapper[_ngcontent-%COMP%]{position:relative;cursor:pointer}.inactive-icon[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.custom-tooltip[_ngcontent-%COMP%]{position:absolute;top:100%;left:50%;transform:translate(-50%);background-color:#032541;color:#fff;padding:6px 10px;border-radius:4px;font-size:14px;white-space:nowrap;box-shadow:0 2px 8px #00000026}"],changeDetection:0})};export{C as a};
