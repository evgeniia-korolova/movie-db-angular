import{a as V,b as F,c as w}from"./chunk-URBRO5ZF.js";import{a as u}from"./chunk-SXUBGAWM.js";import{g as T,i as P}from"./chunk-5GHR62VA.js";import{Ca as y,Ha as _,L as I,Na as v,Q as M,Qa as g,Ua as o,Va as r,Wa as c,X as D,Y as x,Za as O,ab as S,bb as m,eb as a,fb as C,gb as h,ra as b,ta as n,ya as l}from"./chunk-WMH4GK37.js";function p(t){return"title"in t}function d(t){return"name"in t}var f=class t{constructor(i){this.http=i}baseUrl=u.BASE_URL;apiKey=u.API_KEY;getMovieDetails(i){return this.http.get(`${this.baseUrl}/movie/${i}?api_key=${this.apiKey}&language=en-US`)}getTVDetails(i){let e=`${this.baseUrl}/tv/${i}?api_key=${this.apiKey}&language=en-US`;return this.http.get(e)}static \u0275fac=function(e){return new(e||t)(M(T))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})};function j(t,i){if(t&1&&a(0),t&2){let e=m(2);h(" ",e.movie.title," ")}}function A(t,i){if(t&1&&a(0),t&2){let e=m(2);h(" ",e.movie.name," ")}}function R(t,i){if(t&1){let e=O();o(0,"section",1)(1,"div",2),c(2,"img",3),r(),o(3,"div",4),_(4,j,1,1)(5,A,1,1),o(6,"p",5),a(7),r(),o(8,"div",6),c(9,"app-rating-badge",7),o(10,"p"),a(11,"User Score"),r(),o(12,"app-favorite-icon",8),S("click",function(){D(e);let U=m();return x(U.toggleFavorite())}),r()(),o(13,"p",9),a(14),r(),o(15,"div",10)(16,"button",11),a(17,"Watch Trailer"),r()()()(),c(18,"section",12)(19,"section",13)(20,"section",14)}if(t&2){let e=m();n(2),v("src",e.imageUrl+e.movie.poster_path,b)("alt",e.movie.id),n(2),g(e.isMovieDetails(e.movie)?4:e.isTVDetails(e.movie)?5:-1),n(3),C(e.movie.tagline),n(2),v("voteAverage",e.movie.vote_average),n(3),v("filled",e.isFavorite()),n(2),C(e.movie.overview)}}var k=class t{constructor(i,e,s){this.route=i;this.movieDetailsService=e;this.favoritesService=s}movieId;mediaType;movie;isMovieDetails=p;isTVDetails=d;imageUrl="https://image.tmdb.org/t/p/w500";ngOnInit(){this.route.paramMap.subscribe(i=>{let e=i.get("id"),s=i.get("type");e&&s&&(this.movieId=+e,this.mediaType=s,this.loadDetails())})}loadDetails(){(this.mediaType==="movie"?this.movieDetailsService.getMovieDetails(this.movieId):this.movieDetailsService.getTVDetails(this.movieId)).subscribe(e=>{this.movie=e})}get title(){return p(this.movie)?this.movie.title??"":d(this.movie)?this.movie.name??"":""}get releaseDate(){return p(this.movie)?this.movie.release_date??"":d(this.movie)?this.movie.first_air_date??"":""}isFavorite(){return this.favoritesService.isFavorite(this.movieId,this.mediaType)}toggleFavorite(){let i={id:this.movieId,title:this.title,media_type:this.mediaType,poster_path:this.movie.poster_path};this.favoritesService.toggleFavorite(i)}static \u0275fac=function(e){return new(e||t)(l(P),l(f),l(w))};static \u0275cmp=y({type:t,selectors:[["app-movie-details"]],decls:2,vars:1,consts:[[1,"movie-details"],[1,"hero"],[1,"hero__poster"],[3,"src","alt"],[1,"hero__info"],[1,"movie-tagline"],[1,"hero__vote-average"],[3,"voteAverage"],[3,"click","filled"],[1,"overview"],[1,"movie-actions"],[1,"btn"],[1,"credits"],[1,"media"],[1,"recommendations"]],template:function(e,s){e&1&&(o(0,"article",0),_(1,R,21,7),r()),e&2&&(n(),g(s.movie?1:-1))},dependencies:[V,F],styles:[".movie-details[_ngcontent-%COMP%]{padding:2rem;background-color:#f5f5f5}.hero[_ngcontent-%COMP%]{display:flex;gap:2rem;max-width:1440px;margin:0 auto}.hero__poster[_ngcontent-%COMP%]{flex:0 0 300px}.hero__poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px;object-fit:cover}.hero__vote-average[_ngcontent-%COMP%]{position:relative;display:flex;gap:1rem;align-items:center;margin-bottom:1rem}.hero__info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.hero__info[_ngcontent-%COMP%]   .movie-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.hero__info[_ngcontent-%COMP%]   .movie-tagline[_ngcontent-%COMP%]{font-style:italic;color:#777;margin-bottom:1rem}.hero__info[_ngcontent-%COMP%]   .movie-overview[_ngcontent-%COMP%]{margin:1.5rem 0;line-height:1.6}.hero__info[_ngcontent-%COMP%]   .movie-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.hero__info[_ngcontent-%COMP%]   .movie-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#07f;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background .3s ease}.hero__info[_ngcontent-%COMP%]   .movie-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#005ec9}"]})};export{k as MovieDetailsComponent};
