import{a as k,b as E,c as U}from"./chunk-URBRO5ZF.js";import{a as I}from"./chunk-SXUBGAWM.js";import{a as A}from"./chunk-UDNZS6FH.js";import{g as V,i as F}from"./chunk-5GHR62VA.js";import{Ca as y,Ha as d,L as b,Na as _,Oa as P,Q as T,Qa as f,R as S,Ua as o,Va as r,Wa as g,X as v,Y as c,Za as w,ab as x,bb as l,eb as s,fb as M,gb as D,ra as O,ta as n,ya as p}from"./chunk-WMH4GK37.js";function u(t){return"title"in t}function C(t){return"name"in t}var h=class t{constructor(i){this.http=i}baseUrl=I.BASE_URL;apiKey=I.API_KEY;getMovieDetails(i){return this.http.get(`${this.baseUrl}/movie/${i}?api_key=${this.apiKey}&language=en-US`)}getTVDetails(i){let e=`${this.baseUrl}/tv/${i}?api_key=${this.apiKey}&language=en-US`;return this.http.get(e)}static \u0275fac=function(e){return new(e||t)(T(V))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})};function z(t,i){if(t&1&&s(0),t&2){let e=l(2);D(" ",e.movie.title," ")}}function K(t,i){if(t&1&&s(0),t&2){let e=l(2);D(" ",e.movie.name," ")}}function H(t,i){t&1&&(o(0,"div",10),s(1,"Please log in to add to Favorites"),r())}function B(t,i){if(t&1){let e=w();o(0,"section",1)(1,"div",2),g(2,"img",3),r(),o(3,"div",4),d(4,z,1,1)(5,K,1,1),o(6,"p",5),s(7),r(),o(8,"div",6),g(9,"app-rating-badge",7),o(10,"p"),s(11,"User Score"),r(),o(12,"div",8),x("mouseenter",function(){v(e);let m=l();return c(m.showTooltip=!0)})("mouseleave",function(){v(e);let m=l();return c(m.showTooltip=!1)}),o(13,"app-favorite-icon",9),x("click",function(){v(e);let m=l();return c(m.toggleFavorite())}),r(),d(14,H,2,0,"div",10),r()(),o(15,"p",11),s(16),r(),o(17,"div",12)(18,"button",13),s(19,"Watch Trailer"),r()()()(),g(20,"section",14)(21,"section",15)(22,"section",16)}if(t&2){let e=l();n(2),_("src",e.imageUrl+e.movie.poster_path,O)("alt",e.movie.id),n(2),f(e.isMovieDetails(e.movie)?4:e.isTVDetails(e.movie)?5:-1),n(3),M(e.movie.tagline),n(2),_("voteAverage",e.movie.vote_average),n(3),P("inactive",!e.authService.isAuthenticated()),n(),_("filled",e.isFavorite()),n(),f(!e.authService.isAuthenticated()&&e.showTooltip?14:-1),n(2),M(e.movie.overview)}}var j=class t{constructor(i,e,a){this.route=i;this.movieDetailsService=e;this.favoritesService=a}movieId;mediaType;movie;isMovieDetails=u;isTVDetails=C;showTooltip=!1;authService=S(A);imageUrl="https://image.tmdb.org/t/p/w500";ngOnInit(){this.route.paramMap.subscribe(i=>{let e=i.get("id"),a=i.get("type");e&&a&&(this.movieId=+e,this.mediaType=a,this.loadDetails())})}loadDetails(){(this.mediaType==="movie"?this.movieDetailsService.getMovieDetails(this.movieId):this.movieDetailsService.getTVDetails(this.movieId)).subscribe(e=>{this.movie=e})}get title(){return u(this.movie)?this.movie.title??"":C(this.movie)?this.movie.name??"":""}get releaseDate(){return u(this.movie)?this.movie.release_date??"":C(this.movie)?this.movie.first_air_date??"":""}isFavorite(){return this.favoritesService.isFavorite(this.movieId,this.mediaType)}toggleFavorite(){let i={id:this.movieId,title:this.title,media_type:this.mediaType,poster_path:this.movie.poster_path};this.favoritesService.toggleFavorite(i)}static \u0275fac=function(e){return new(e||t)(p(F),p(h),p(U))};static \u0275cmp=y({type:t,selectors:[["app-movie-details"]],decls:2,vars:1,consts:[[1,"movie-details"],[1,"hero"],[1,"hero__poster"],[3,"src","alt"],[1,"hero__info"],[1,"movie-tagline"],[1,"hero__vote-average"],[3,"voteAverage"],[1,"favorite__wrapper",3,"mouseenter","mouseleave"],[3,"click","filled"],[1,"custom-tooltip"],[1,"overview"],[1,"movie-actions"],[1,"btn"],[1,"credits"],[1,"media"],[1,"recommendations"]],template:function(e,a){e&1&&(o(0,"article",0),d(1,B,23,10),r()),e&2&&(n(),f(a.movie?1:-1))},dependencies:[k,E],styles:[".movie-details[_ngcontent-%COMP%]{padding:2rem;background-color:#f5f5f5}.hero[_ngcontent-%COMP%]{display:flex;gap:2rem;max-width:1440px;margin:0 auto}.hero__poster[_ngcontent-%COMP%]{flex:0 0 300px}.hero__poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px;object-fit:cover}.hero__vote-average[_ngcontent-%COMP%]{position:relative;display:flex;gap:1rem;align-items:center;margin-bottom:1rem}.hero__info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.hero__info[_ngcontent-%COMP%]   .movie-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.hero__info[_ngcontent-%COMP%]   .movie-tagline[_ngcontent-%COMP%]{font-style:italic;color:#777;margin-bottom:1rem}.hero__info[_ngcontent-%COMP%]   .movie-overview[_ngcontent-%COMP%]{margin:1.5rem 0;line-height:1.6}.hero__info[_ngcontent-%COMP%]   .movie-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.hero__info[_ngcontent-%COMP%]   .movie-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#07f;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:background .3s ease}.hero__info[_ngcontent-%COMP%]   .movie-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#005ec9}.favorite__wrapper[_ngcontent-%COMP%]{cursor:pointer;position:relative}.custom-tooltip[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:120%;background-color:#032541;color:#fff;padding:10px;border-radius:4px;font-size:16px;white-space:nowrap;box-shadow:0 2px 8px #00000026;z-index:10;pointer-events:none;opacity:.95}.inactive[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;cursor:default}"]})};export{j as MovieDetailsComponent};
